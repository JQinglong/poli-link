
ÊîøÊ≤ª„Åå„Å©„ÅÜÊ±∫„Åæ„Å£„Å¶„ÅÑ„Åè„ÅÆ„Åã

‰ºöË≠∞‰Ωì
„ÄÄ‰∏ªÊüª
„ÄÄ‰ºöÈï∑
„ÄÄÊßãÊàêÂì°
„ÄÄ„ÄÄ‰∫∫„Éû„Çπ„Çø
„ÄÄ„ÄÄ„ÄÄÊâÄÂ±ûÂ±•Ê≠¥
„ÄÄ„ÄÄ„ÄÄSNS
„ÄÄ„ÄÄ„ÄÄÊõ∏Á±ç
„ÄÄ„ÅäÈáë
„ÄÄ„Åì„Çå„Çâ„ÅÆÂ±•Ê≠¥
„ÄÄË≠∞‰∫ãÈå≤

„Ç™„É™„É≥„Éî„ÉÉ„ÇØÁµÑÁπîÂßîÂì°‰ºö
Êñ∞Âûã„Ç≥„É≠„Éä

https://www.cas.go.jp/jp/seisaku/ful/yusikisyakaigi.html
https://www.cas.go.jp/jp/seisaku/ful/pdf/meibo-corona.pdf
Áü≥Áî∞ Êò≠Êµ© Êó•Êú¨Âä¥ÂÉçÁµÑÂêàÁ∑èÈÄ£Âêà‰ºöÂâØ‰∫ãÂãôÂ±ÄÈï∑
‰ªäÊùë È°ïÂè≤ Êù±‰∫¨ÈÉΩÁ´ãÈßíËæºÁóÖÈô¢ÊÑüÊüìÁóá„Çª„É≥„Çø„ÉºÈï∑„ÄÅÊÑüÊüìÁóáÁßëÈÉ®Èï∑
Â§ßÁ´π ÊñáÈõÑ Â§ßÈò™Â§ßÂ≠¶Â§ßÂ≠¶Èô¢ÁµåÊ∏àÂ≠¶Á†îÁ©∂ÁßëÊïôÊéà
Â≤°ÈÉ® ‰ø°ÂΩ¶ Â∑ùÂ¥éÂ∏ÇÂÅ•Â∫∑ÂÆâÂÖ®Á†îÁ©∂ÊâÄÈï∑
ÊäºË∞∑ ‰ªÅ Êù±ÂåóÂ§ßÂ≠¶Â§ßÂ≠¶Èô¢ÂåªÂ≠¶Á≥ªÁ†îÁ©∂ÁßëÂæÆÁîüÁâ©Â≠¶ÂàÜÈáéÊïôÊéà
‚óé Â∞æË∫´ ËåÇ Áã¨Á´ãË°åÊîøÊ≥ï‰∫∫Âú∞ÂüüÂåªÁôÇÊ©üËÉΩÊé®ÈÄ≤Ê©üÊßãÁêÜ‰∫ãÈï∑
ÈáúËê¢ Ô©Å ÂÖ¨ÁõäÁ§æÂõ£Ê≥ï‰∫∫Êó•Êú¨ÂåªÂ∏´‰ºöÂ∏∏‰ªªÁêÜ‰∫ã
Âπ∏Êú¨ Êô∫ÂΩ¶ Êù±‰∫¨ÂïÜÂ∑•‰ºöË≠∞ÊâÄË≠∞Âì°
Â∞èÊûóÊÖ∂‰∏ÄÈÉé ÂÖ¨ÁõäË≤°Âõ£Ê≥ï‰∫∫Êù±‰∫¨Ë≤°Âõ£ÊîøÁ≠ñÁ†îÁ©∂ÊâÄÁ†îÁ©∂‰∏ªÂππ
ËàòÁî∞ ‰∏ÄÂçö Êù±ÈÇ¶Â§ßÂ≠¶ÂæÆÁîüÁâ©„ÉªÊÑüÊüìÁóáÂ≠¶Ë¨õÂ∫ßÊïôÊéà
‰∏≠Â±±„Å≤„Å®„Åø Èúû„ÅåÈñ¢Á∑èÂêàÊ≥ïÂæã‰∫ãÂãôÊâÄÂºÅË≠∑Â£´
Âπ≥‰∫ï ‰º∏Ê≤ª È≥•ÂèñÁúåÁü•‰∫ã
Âçó Á†Ç Ë™≠Â£≤Êñ∞ËÅûÊù±‰∫¨Êú¨Á§æÂ∏∏ÂãôÂèñÁ∑†ÂΩπ Ë™øÊüªÁ†îÁ©∂Êú¨ÈÉ®Èï∑
Ê≠¶Ëó§ È¶ôÁπî Êù±‰∫¨Â§ßÂ≠¶ÂåªÁßëÂ≠¶Á†îÁ©∂ÊâÄÂÖ¨ÂÖ±ÊîøÁ≠ñÁ†îÁ©∂ÂàÜÈáéÊïôÊéà
‚óã ËÑáÁî∞ ÈöÜÂ≠ó ÂõΩÁ´ãÊÑüÊüìÁóáÁ†îÁ©∂ÊâÄÊâÄÈï∑
„ÄêËá®ÊôÇÊßãÊàêÂì°„Äë
Á£ØÈÉ® Âì≤ ÊÖ∂ÊáâÁæ©Â°æÂ§ßÂ≠¶Ê≥ïÁßëÂ§ßÂ≠¶Èô¢ÊïôÊéà
Â§™Áî∞ Âú≠Ê¥ã ‰∏ÄËà¨Á§æÂõ£Ê≥ï‰∫∫Êó•Êú¨ÂåªÁôÇÊ≥ï‰∫∫Âçî‰ºöÂâØ‰ºöÈï∑
Ê≤≥Êú¨ ÂÆèÂ≠ê ANA Á∑èÂêàÁ†îÁ©∂ÊâÄ‰ºöÈï∑
Ê∏ÖÂè§ ÊÑõÂºì ÂÖ®ÂõΩ‰øùÂÅ•ÊâÄÈï∑‰ºöÂâØ‰ºöÈï∑
‚óéÔºöÂàÜÁßë‰ºöÈï∑ ‚óãÔºöÂàÜÁßë‰ºöÈï∑‰ª£ÁêÜ


ÊäÄË°ìÈÅ∏ÂÆö

Nuxt Type

API
„ÄÄgoogle spreadsheet api„ÄÄÁõ¥Êé•‰ΩøÁî®„ÅØ‰æùÂ≠ò„Åó„Åô„Åé„Çã„ÅÆ„Åß„ÉÄ„É°
„ÄÄGoogleSpread„ÄÄ‚ÜíHerokuDB„ÅØËâØ„ÅÑ„Å®ÊÄù„ÅÜ
„ÄÄHerokuDBÁî®API
„ÄÄREST APIÈñãÁô∫„Å´ÁâπÂåñ„Åó„ÅüWeb„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ„Åå„ÇÇ„Åü„Çâ„ÅôÁîüÁî£ÊÄß„ÅÆÂêë‰∏ä
„ÄÄhttps://eng-blog.iij.ad.jp/archives/5415
„ÄÄÂÄôË£ú
„ÄÄDjango REST Framework
„ÄÄ„ÉªJava„ÅØÊç®„Å¶Èõ£„ÅÑ„Åë„Å©
„ÄÄ„ÉªË®ÄË™û„Éà„É¨„É≥„Éâ
„ÄÄDB‰Ωú„Çã„ÅÆ„ÅØ„Åó„Çì„Å©„ÅÑ„Åë„Å©
„ÄÄ„Éë„ÉÉ„Ç±„Éº„Ç∏„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´„Å™„ÇâpipÔºå‰ªÆÊÉ≥Áí∞Â¢É„ÅÆÊßãÁØâ„Å™„ÇâvirtualenvÔºàvenvÔºâ„Çí‰Ωø„Åà„Å∞ÂØæÂøú„Åß„Åç„Åæ„Åô„ÅåÔºåpipenv„ÅØ„Åù„Çå„Çâ„Çí„Åæ„Å®„ÇÅ„Å¶„Çà„ÇäÁ∞°Âçò„Å´Êâ±„Åà„Çã„Çà„ÅÜ„Å´„Çµ„Éù„Éº„Éà„Åó„Å¶„Åè„Çå„Åæ„ÅôÔºé
API„ÇÇheroku„Å´„Éá„Éó„É≠„Ç§

DB
„ÄÄheroku„ÅØÊú¨Êù•„ÅØPostgreSQL
„ÄÄ„ÉÅ„É£„É¨„É≥„Ç∏„Åó„Å¶„Åø„Çã
„ÄÄ„Éû„Ç§„Ç∞„É¨„Éº„Ç∑„Éß„É≥„ÇÇsqlite„Åß„ÅØ„Å™„Åèpostgres„Å´„Åô„Çã„Åì„Å®„ÇíËÄÉÊÖÆ
„ÄÄdocker-compose„ÅßDjangoÈñãÁô∫Áí∞Â¢É„ÇíÊßãÁØâ„Åô„Çã
„ÄÄhttps://zenn.dev/dsonoda/articles/dbe14ca8af617ed85b1f
„ÄÄÔºàÂøÖË¶Å„Å™„ÇâÔºâPython„ÅÆmigration„ÉÑ„Éº„É´„ÅÆalembic„ÇíÂãï„Åã„Åó„Å¶„Åø„Åü
„ÄÄhttps://qiita.com/penpenta/items/c993243c4ceee3840f30


ÊßãÊàêË§áÈõë„Å™„ÅÆ„Åß„ÄÅDocker‰Ωø„ÅÜ

Django + REST framework + Swagger + JWT + docker-compose „ÅßÈñãÁô∫Áí∞Â¢ÉÊßãÁØâ
https://qiita.com/mykysyk@github/items/fef6fb298393a029a5d4

Âü∫Êú¨„ÅØ„Åì„Çå„Å´Âæì„ÅÜ„Åå„ÄÅ„Åì„Çå„ÅØPython„Å†„Åë
DB„ÇÇ‰ΩúÊàê„Åô„Çã„ÅÆ„Åß„ÄÅÂ§ß„Åç„Å™ÊßãÊàê„ÅØ‰∏ãË®ò

```
PoliLink
‚îú‚îÄ‚îÄ PolyLink.md
‚îú‚îÄ‚îÄ docker-compose.yml 
‚îú‚îÄ‚îÄ .git
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ poli-link-api
‚îÇ   ‚îú‚îÄ‚îÄ config
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ __pycache__
‚îÇ       ‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ poli-link-db
‚îÇ       ‚îú‚îÄ‚îÄ (postgres)
‚îÇ       ‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ poli-link-web
‚îÇ       ‚îú‚îÄ‚îÄ (nuxt)
‚îÇ       ‚îú‚îÄ‚îÄ ...
```

Mac„Å´pipenv„Çí„Ç§„É≥„Çπ„Éà„Éº„É´„Åô„Çã„Åæ„Åß„ÅÆ„É°„É¢
https://qiita.com/kapibara-3/items/c4acf09c8b61e43699ab

```sh
brew update

# „Ç®„É©„ÉºÂØæÂá¶
sudo rm /usr/local/share/Library/Caches/Yarn/v6/npm-micromatch-3.1.10-70859bc95c9840952f359a068a3fc49f9ecfac23-integrity/node_modules/micromatch/lib/.DS_Store
sudo rm /usr/local/share/Library/Caches/Yarn/v6/npm-ws-3.3.3-f1cf84fe2d5e901ebce94efaece785f187a228f2-integrity/node_modules/ws/lib/.DS_Store

sudo find /usr/local/share/Library/Caches/Yarn/v6 -type f -name ".DS_Store" -print | xargs sudo rm -f

brew install pyenv
pyenv install --list

# 3.8.1„ÅåÂá∫„Å¶„Åì„Å™„ÅÑ„ÅÆ„Åß
brew upgrade pyenv
pyenv install --list
sudo pyenv install 3.8.1
```

error: implicit declaration of function 'sendfile' is invalid

https://teratail.com/questions/309663

```sh
sudo rm -rf /Library/Developer/CommandLineTools
xcode-select --install
brew reinstall zlib bzip2
==> Downloading https://homebrew.bintray.com/bottles/zlib-1.2.11.big_sur.bottle.tar.gz
######################################################################## 100.0%
==> Reinstalling zlib 
==> Pouring zlib-1.2.11.big_sur.bottle.tar.gz
==> Caveats
zlib is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

For compilers to find zlib you may need to set:
  export LDFLAGS="-L/usr/local/opt/zlib/lib"
  export CPPFLAGS="-I/usr/local/opt/zlib/include"

For pkg-config to find zlib you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"

==> Summary
üç∫  /usr/local/Cellar/zlib/1.2.11: 12 files, 413.4KB
==> Downloading https://homebrew.bintray.com/bottles/bzip2-1.0.8.big_sur.bottle.1.tar.gz
######################################################################## 100.0%
==> Reinstalling bzip2 
==> Pouring bzip2-1.0.8.big_sur.bottle.1.tar.gz
==> Caveats
bzip2 is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have bzip2 first in your PATH, run:
  echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile

For compilers to find bzip2 you may need to set:
  export LDFLAGS="-L/usr/local/opt/bzip2/lib"
  export CPPFLAGS="-I/usr/local/opt/bzip2/include"

==> Summary
üç∫  /usr/local/Cellar/bzip2/1.0.8: 26 files, 532.7KB
==> Caveats
==> zlib
zlib is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

For compilers to find zlib you may need to set:
  export LDFLAGS="-L/usr/local/opt/zlib/lib"
  export CPPFLAGS="-I/usr/local/opt/zlib/include"

For pkg-config to find zlib you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"

==> bzip2
bzip2 is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have bzip2 first in your PATH, run:
  echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile

For compilers to find bzip2 you may need to set:
  export LDFLAGS="-L/usr/local/opt/bzip2/lib"
  export CPPFLAGS="-I/usr/local/opt/bzip2/include"
```

„É°„ÉÉ„Çª„Éº„Ç∏„Å´Âæì„Å£„Å¶
```sh
export LDFLAGS="-L/usr/local/opt/zlib/lib"
export CPPFLAGS="-I/usr/local/opt/zlib/include"
export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"
echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile
export LDFLAGS="-L/usr/local/opt/bzip2/lib"
export CPPFLAGS="-I/usr/local/opt/bzip2/include"

#„Åï„Çâ„Å´
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile
echo 'eval "$(pyenv init -)"' >> ~/.bash_profile
source ~/.bash_profile

#https://teratail.com/questions/309549
brew install pyenv zlib bzip2 readline
CPPFLAGS="-I$(brew --prefix openssl)/include -I$(brew --prefix bzip2)/include -I$(brew --prefix readline)/include -I$(brew --prefix zlib)/include" LDFLAGS="-L$(brew --prefix openssl)/lib -L$(brew --prefix readline)/lib -L$(brew --prefix zlib)/lib -L$(brew --prefix bzip2)/lib" pyenv install 3.8.6

```
OK

```sh
$ pyenv versions
  system
* 3.7.2 (set by ...
  3.8.6
$ pyenv global 3.8.6
$ pyenv versions
  system
  3.7.2
* 3.8.6 (set by ...
$ python -V
Python 3.8.6
$ pip install --upgrade pip
$ pip install pipenv
$ pipenv --version
pipenv, version 2020.11.15
$ echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
$ echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile
$ echo 'eval "$(pyenv init -)"' >> ~/.bash_profile
```

https://zenn.dev/dsonoda/articles/dbe14ca8af617ed85b1f#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97
„ÇÇÂèÇËÄÉ
```sh
$ mkdir poli-link-api && cd poli-link-api
$ pipenv --python 3.8
$ ls
Pipfile
```
gunicorn„ÅØ‰Ωø„Çè„Å™„ÅÑ
psycopg2-binary„ÇÇ„ÅØPostgres„Çà„ÅÜ„Å´ÂøÖË¶Å
```sh
$ pipenv shell
(poli-link-api)$ pipenv install django psycopg2-binary

‚úò Locking Failed! 
ERROR:pip.subprocessor:Command errored out with exit status 1:
 command: /Users/konnokiyotaka/.local/share/virtualenvs/poli-link-api-bZXAEGet/bin/python -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/setup.py'"'"'; __file__='"'"'/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info
     cwd: /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/
Complete output (23 lines):
running egg_info
creating /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info
writing /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/PKG-INFO
writing dependency_links to /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/dependency_links.txt
writing top-level names to /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/top_level.txt
writing manifest file '/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/SOURCES.txt'

Error: pg_config executable not found.

pg_config is required to build psycopg2 from source.  Please add the directory
containing pg_config to the $PATH or specify the full executable path with the
option:
```

Âüí„ÅåÊòé„Åã„Å™„ÅÑ
django „ÅÆdocker„Ç§„É°„Éº„Ç∏„ÅØ„Å™„ÅÑ„ÅÆ„Åã

Docker-docs-ja
https://docs.docker.jp/compose/django.html


```yml:docker-compose.yml
version: '3'

services:
  db:
    container_name: poli-link-db
    image: postgres
  api:
    container_name: poli-link-api
    build: ./poli-link-api
    command: python3 manage.py runserver 0.0.0.0:8000
    volumes:
      - ./poli-link-api/:/code
    ports:
      - "8000:8000"
    depends_on:
      - db


```

poli-link-api „Éá„Ç£„É¨„ÇØ„Éà„É™‰ΩúÊàê

```Dockerfile
FROM python:3-alpine
ENV PYTHONUNBUFFERED 1
RUN mkdir /code
WORKDIR /code
ADD requirements.txt /code/
RUN pip install --upgrade pip
RUN pip install -r requirements.txt
ADD . /code/
```

requirements.txt ‰ΩúÊàê
```txt:requirements.txt
certifi==2020.4.5.1
chardet==3.0.4
coreapi==2.3.3
coreschema==0.0.4
Django==2.2.12
django-filter==2.2.0
django-rest-swagger==2.2.0
djangorestframework==3.11.0
djangorestframework-jwt==1.11.0
idna==2.9
itypes==1.1.0
Jinja2==2.11.2
MarkupSafe==1.1.1
openapi-codec==1.3.2
PyJWT==1.7.1
pytz==2019.3
requests==2.23.0
simplejson==3.17.0
sqlparse==0.3.1
uritemplate==3.0.1
urllib3==1.25.9
mysqlclient==1.4.6
```
psycopg2 „ÇíÂÖ•„Çå„Çã„Å®„Ç®„É©„Éº
mysql„Å´„Åó„Å¶„Åø„Çã


Django „Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆÁîüÊàê

```sh
docker-compose run api django-admin.py startproject config .
```

```py:settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'postgres',
        'USER': 'postgres',
        'HOST': 'db',
        'PORT': 5432,
    }
}
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'polilink_database',
        'USER': 'root',
        'HOST': 'db',
        'PORT': 3306,
    }
}
```

```sh
docker-compose ps
docker-compose up
```
„ÇÑ„ÅØ„Çä„Ç®„É©„Éº
django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No module named 'psycopg2'



```sh
docker-compose exec poli-link-api pipenv install psycopg2-binary
docker-compose up --build
```
docker-compose up --build„ÄÄ„ÅåÂøÖË¶Å„Å†„Å£„ÅüÔºü
http://localhost:8000/
Ë¶ã„Åà„Åü

„Åì„Çå„ÇíÂàùÊúü„ÇΩ„Éº„Çπ„Å®„Åô„Çã

```sh
git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin git@github.com:JQinglong/poli-link.git
git push -u origin main
```


```sh
```


```sh
```
