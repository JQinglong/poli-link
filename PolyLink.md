
æ”¿æ²»ãŒã©ã†æ±ºã¾ã£ã¦ã„ãã®ã‹

ä¼šè­°ä½“
ã€€ä¸»æŸ»
ã€€ä¼šé•·
ã€€æ§‹æˆå“¡
ã€€ã€€äººãƒã‚¹ã‚¿
ã€€ã€€ã€€æ‰€å±å±¥æ­´
ã€€ã€€ã€€SNS
ã€€ã€€ã€€æ›¸ç±
ã€€ãŠé‡‘
ã€€ã“ã‚Œã‚‰ã®å±¥æ­´
ã€€è­°äº‹éŒ²

ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯çµ„ç¹”å§”å“¡ä¼š
æ–°å‹ã‚³ãƒ­ãƒŠ

https://www.cas.go.jp/jp/seisaku/ful/yusikisyakaigi.html
https://www.cas.go.jp/jp/seisaku/ful/pdf/meibo-corona.pdf
çŸ³ç”° æ˜­æµ© æ—¥æœ¬åŠ´åƒçµ„åˆç·é€£åˆä¼šå‰¯äº‹å‹™å±€é•·
ä»Šæ‘ é¡•å² æ±äº¬éƒ½ç«‹é§’è¾¼ç—…é™¢æ„ŸæŸ“ç—‡ã‚»ãƒ³ã‚¿ãƒ¼é•·ã€æ„ŸæŸ“ç—‡ç§‘éƒ¨é•·
å¤§ç«¹ æ–‡é›„ å¤§é˜ªå¤§å­¦å¤§å­¦é™¢çµŒæ¸ˆå­¦ç ”ç©¶ç§‘æ•™æˆ
å²¡éƒ¨ ä¿¡å½¦ å·å´å¸‚å¥åº·å®‰å…¨ç ”ç©¶æ‰€é•·
æŠ¼è°· ä» æ±åŒ—å¤§å­¦å¤§å­¦é™¢åŒ»å­¦ç³»ç ”ç©¶ç§‘å¾®ç”Ÿç‰©å­¦åˆ†é‡æ•™æˆ
â— å°¾èº« èŒ‚ ç‹¬ç«‹è¡Œæ”¿æ³•äººåœ°åŸŸåŒ»ç™‚æ©Ÿèƒ½æ¨é€²æ©Ÿæ§‹ç†äº‹é•·
é‡œè¢ ï© å…¬ç›Šç¤¾å›£æ³•äººæ—¥æœ¬åŒ»å¸«ä¼šå¸¸ä»»ç†äº‹
å¹¸æœ¬ æ™ºå½¦ æ±äº¬å•†å·¥ä¼šè­°æ‰€è­°å“¡
å°æ—æ…¶ä¸€éƒ å…¬ç›Šè²¡å›£æ³•äººæ±äº¬è²¡å›£æ”¿ç­–ç ”ç©¶æ‰€ç ”ç©¶ä¸»å¹¹
èˆ˜ç”° ä¸€åš æ±é‚¦å¤§å­¦å¾®ç”Ÿç‰©ãƒ»æ„ŸæŸ“ç—‡å­¦è¬›åº§æ•™æˆ
ä¸­å±±ã²ã¨ã¿ éœãŒé–¢ç·åˆæ³•å¾‹äº‹å‹™æ‰€å¼è­·å£«
å¹³äº• ä¼¸æ²» é³¥å–çœŒçŸ¥äº‹
å— ç ‚ èª­å£²æ–°èæ±äº¬æœ¬ç¤¾å¸¸å‹™å–ç· å½¹ èª¿æŸ»ç ”ç©¶æœ¬éƒ¨é•·
æ­¦è—¤ é¦™ç¹” æ±äº¬å¤§å­¦åŒ»ç§‘å­¦ç ”ç©¶æ‰€å…¬å…±æ”¿ç­–ç ”ç©¶åˆ†é‡æ•™æˆ
â—‹ è„‡ç”° éš†å­— å›½ç«‹æ„ŸæŸ“ç—‡ç ”ç©¶æ‰€æ‰€é•·
ã€è‡¨æ™‚æ§‹æˆå“¡ã€‘
ç£¯éƒ¨ å“² æ…¶æ‡‰ç¾©å¡¾å¤§å­¦æ³•ç§‘å¤§å­¦é™¢æ•™æˆ
å¤ªç”° åœ­æ´‹ ä¸€èˆ¬ç¤¾å›£æ³•äººæ—¥æœ¬åŒ»ç™‚æ³•äººå”ä¼šå‰¯ä¼šé•·
æ²³æœ¬ å®å­ ANA ç·åˆç ”ç©¶æ‰€ä¼šé•·
æ¸…å¤ æ„›å¼“ å…¨å›½ä¿å¥æ‰€é•·ä¼šå‰¯ä¼šé•·
â—ï¼šåˆ†ç§‘ä¼šé•· â—‹ï¼šåˆ†ç§‘ä¼šé•·ä»£ç†


æŠ€è¡“é¸å®š

Nuxt Type

API
ã€€google spreadsheet apiã€€ç›´æ¥ä½¿ç”¨ã¯ä¾å­˜ã—ã™ãã‚‹ã®ã§ãƒ€ãƒ¡
ã€€GoogleSpreadã€€â†’HerokuDBã¯è‰¯ã„ã¨æ€ã†
ã€€HerokuDBç”¨API
ã€€REST APIé–‹ç™ºã«ç‰¹åŒ–ã—ãŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒã‚‚ãŸã‚‰ã™ç”Ÿç”£æ€§ã®å‘ä¸Š
ã€€https://eng-blog.iij.ad.jp/archives/5415
ã€€å€™è£œ
ã€€Django REST Framework
ã€€ãƒ»Javaã¯æ¨ã¦é›£ã„ã‘ã©
ã€€ãƒ»è¨€èªãƒˆãƒ¬ãƒ³ãƒ‰
ã€€DBä½œã‚‹ã®ã¯ã—ã‚“ã©ã„ã‘ã©
ã€€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãªã‚‰pipï¼Œä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰ãªã‚‰virtualenvï¼ˆvenvï¼‰ã‚’ä½¿ãˆã°å¯¾å¿œã§ãã¾ã™ãŒï¼Œpipenvã¯ãã‚Œã‚‰ã‚’ã¾ã¨ã‚ã¦ã‚ˆã‚Šç°¡å˜ã«æ‰±ãˆã‚‹ã‚ˆã†ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ãã‚Œã¾ã™ï¼
APIã‚‚herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤

DB
ã€€herokuã¯æœ¬æ¥ã¯PostgreSQL
ã€€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã‚‹
ã€€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚sqliteã§ã¯ãªãpostgresã«ã™ã‚‹ã“ã¨ã‚’è€ƒæ…®
ã€€docker-composeã§Djangoé–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹
ã€€https://zenn.dev/dsonoda/articles/dbe14ca8af617ed85b1f
ã€€ï¼ˆå¿…è¦ãªã‚‰ï¼‰Pythonã®migrationãƒ„ãƒ¼ãƒ«ã®alembicã‚’å‹•ã‹ã—ã¦ã¿ãŸ
ã€€https://qiita.com/penpenta/items/c993243c4ceee3840f30


æ§‹æˆè¤‡é›‘ãªã®ã§ã€Dockerä½¿ã†

Django + REST framework + Swagger + JWT + docker-compose ã§é–‹ç™ºç’°å¢ƒæ§‹ç¯‰
https://qiita.com/mykysyk@github/items/fef6fb298393a029a5d4

åŸºæœ¬ã¯ã“ã‚Œã«å¾“ã†ãŒã€ã“ã‚Œã¯Pythonã ã‘
DBã‚‚ä½œæˆã™ã‚‹ã®ã§ã€å¤§ããªæ§‹æˆã¯ä¸‹è¨˜

```
PoliLink
â”œâ”€â”€ PolyLink.md
â”œâ”€â”€ docker-compose.yml 
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ poli-link-api
â”‚   â”œâ”€â”€ config
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ __pycache__
â”‚       â”œâ”€â”€ ...
â”œâ”€â”€ poli-link-db
â”‚       â”œâ”€â”€ (postgres)
â”‚       â”œâ”€â”€ ...
â”œâ”€â”€ poli-link-web
â”‚       â”œâ”€â”€ (nuxt)
â”‚       â”œâ”€â”€ ...
```

Macã«pipenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¾ã§ã®ãƒ¡ãƒ¢
https://qiita.com/kapibara-3/items/c4acf09c8b61e43699ab

```sh
brew update

# ã‚¨ãƒ©ãƒ¼å¯¾å‡¦
sudo rm /usr/local/share/Library/Caches/Yarn/v6/npm-micromatch-3.1.10-70859bc95c9840952f359a068a3fc49f9ecfac23-integrity/node_modules/micromatch/lib/.DS_Store
sudo rm /usr/local/share/Library/Caches/Yarn/v6/npm-ws-3.3.3-f1cf84fe2d5e901ebce94efaece785f187a228f2-integrity/node_modules/ws/lib/.DS_Store

sudo find /usr/local/share/Library/Caches/Yarn/v6 -type f -name ".DS_Store" -print | xargs sudo rm -f

brew install pyenv
pyenv install --list

# 3.8.1ãŒå‡ºã¦ã“ãªã„ã®ã§
brew upgrade pyenv
pyenv install --list
sudo pyenv install 3.8.1
```

error: implicit declaration of function 'sendfile' is invalid

https://teratail.com/questions/309663

```sh
sudo rm -rf /Library/Developer/CommandLineTools
xcode-select --install
brew reinstall zlib bzip2
==> Downloading https://homebrew.bintray.com/bottles/zlib-1.2.11.big_sur.bottle.tar.gz
######################################################################## 100.0%
==> Reinstalling zlib 
==> Pouring zlib-1.2.11.big_sur.bottle.tar.gz
==> Caveats
zlib is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

For compilers to find zlib you may need to set:
  export LDFLAGS="-L/usr/local/opt/zlib/lib"
  export CPPFLAGS="-I/usr/local/opt/zlib/include"

For pkg-config to find zlib you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"

==> Summary
ğŸº  /usr/local/Cellar/zlib/1.2.11: 12 files, 413.4KB
==> Downloading https://homebrew.bintray.com/bottles/bzip2-1.0.8.big_sur.bottle.1.tar.gz
######################################################################## 100.0%
==> Reinstalling bzip2 
==> Pouring bzip2-1.0.8.big_sur.bottle.1.tar.gz
==> Caveats
bzip2 is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have bzip2 first in your PATH, run:
  echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile

For compilers to find bzip2 you may need to set:
  export LDFLAGS="-L/usr/local/opt/bzip2/lib"
  export CPPFLAGS="-I/usr/local/opt/bzip2/include"

==> Summary
ğŸº  /usr/local/Cellar/bzip2/1.0.8: 26 files, 532.7KB
==> Caveats
==> zlib
zlib is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

For compilers to find zlib you may need to set:
  export LDFLAGS="-L/usr/local/opt/zlib/lib"
  export CPPFLAGS="-I/usr/local/opt/zlib/include"

For pkg-config to find zlib you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"

==> bzip2
bzip2 is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have bzip2 first in your PATH, run:
  echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile

For compilers to find bzip2 you may need to set:
  export LDFLAGS="-L/usr/local/opt/bzip2/lib"
  export CPPFLAGS="-I/usr/local/opt/bzip2/include"
```

ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¾“ã£ã¦
```sh
export LDFLAGS="-L/usr/local/opt/zlib/lib"
export CPPFLAGS="-I/usr/local/opt/zlib/include"
export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"
echo 'export PATH="/usr/local/opt/bzip2/bin:$PATH"' >> /Users/konnokiyotaka/.bash_profile
export LDFLAGS="-L/usr/local/opt/bzip2/lib"
export CPPFLAGS="-I/usr/local/opt/bzip2/include"

#ã•ã‚‰ã«
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile
echo 'eval "$(pyenv init -)"' >> ~/.bash_profile
source ~/.bash_profile

#https://teratail.com/questions/309549
brew install pyenv zlib bzip2 readline
CPPFLAGS="-I$(brew --prefix openssl)/include -I$(brew --prefix bzip2)/include -I$(brew --prefix readline)/include -I$(brew --prefix zlib)/include" LDFLAGS="-L$(brew --prefix openssl)/lib -L$(brew --prefix readline)/lib -L$(brew --prefix zlib)/lib -L$(brew --prefix bzip2)/lib" pyenv install 3.8.6

```
OK

```sh
$ pyenv versions
  system
* 3.7.2 (set by ...
  3.8.6
$ pyenv global 3.8.6
$ pyenv versions
  system
  3.7.2
* 3.8.6 (set by ...
$ python -V
Python 3.8.6
$ pip install --upgrade pip
$ pip install pipenv
$ pipenv --version
pipenv, version 2020.11.15
$ echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
$ echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile
$ echo 'eval "$(pyenv init -)"' >> ~/.bash_profile
```

https://zenn.dev/dsonoda/articles/dbe14ca8af617ed85b1f#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97
ã‚‚å‚è€ƒ
```sh
$ mkdir poli-link-api && cd poli-link-api
$ pipenv --python 3.8
$ ls
Pipfile
```
gunicornã¯ä½¿ã‚ãªã„
psycopg2-binaryã‚‚ã¯Postgresã‚ˆã†ã«å¿…è¦
```sh
$ pipenv shell
(poli-link-api)$ pipenv install django psycopg2-binary

âœ˜ Locking Failed! 
ERROR:pip.subprocessor:Command errored out with exit status 1:
 command: /Users/konnokiyotaka/.local/share/virtualenvs/poli-link-api-bZXAEGet/bin/python -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/setup.py'"'"'; __file__='"'"'/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' egg_info --egg-base /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info
     cwd: /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/
Complete output (23 lines):
running egg_info
creating /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info
writing /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/PKG-INFO
writing dependency_links to /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/dependency_links.txt
writing top-level names to /private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/top_level.txt
writing manifest file '/private/var/folders/5n/wvqfj5md2xj_nbk0dnxy6wrm0000gn/T/pip-resolver-bj7wxzyi/psycopg2-binary/pip-egg-info/psycopg2_binary.egg-info/SOURCES.txt'

Error: pg_config executable not found.

pg_config is required to build psycopg2 from source.  Please add the directory
containing pg_config to the $PATH or specify the full executable path with the
option:
```

åŸ’ãŒæ˜ã‹ãªã„
django ã®dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãªã„ã®ã‹

Docker-docs-ja
https://docs.docker.jp/compose/django.html


```yml:docker-compose.yml
version: '3'

services:
  db:
    container_name: poli-link-db
    image: postgres
  api:
    container_name: poli-link-api
    build: ./poli-link-api
    command: python3 manage.py runserver 0.0.0.0:8000
    volumes:
      - ./poli-link-api/:/code
    ports:
      - "8000:8000"
    depends_on:
      - db


```

poli-link-api ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ

```Dockerfile
FROM python:3-alpine
ENV PYTHONUNBUFFERED 1
RUN mkdir /code
WORKDIR /code
ADD requirements.txt /code/
RUN pip install --upgrade pip
RUN pip install -r requirements.txt
ADD . /code/
```

requirements.txt ä½œæˆ
```txt:requirements.txt
certifi==2020.4.5.1
chardet==3.0.4
coreapi==2.3.3
coreschema==0.0.4
Django==2.2.12
django-filter==2.2.0
django-rest-swagger==2.2.0
djangorestframework==3.11.0
djangorestframework-jwt==1.11.0
idna==2.9
itypes==1.1.0
Jinja2==2.11.2
MarkupSafe==1.1.1
openapi-codec==1.3.2
PyJWT==1.7.1
pytz==2019.3
requests==2.23.0
simplejson==3.17.0
sqlparse==0.3.1
uritemplate==3.0.1
urllib3==1.25.9
mysqlclient==1.4.6
```
psycopg2 ã‚’å…¥ã‚Œã‚‹ã¨ã‚¨ãƒ©ãƒ¼
mysqlã«ã—ã¦ã¿ã‚‹


Django ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆ

```sh
docker-compose run api django-admin.py startproject config .
```

```py:settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'postgres',
        'USER': 'postgres',
        'HOST': 'db',
        'PORT': 5432,
    }
}
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'polilink_database',
        'USER': 'root',
        'HOST': 'db',
        'PORT': 3306,
    }
}
```

```sh
docker-compose ps
docker-compose up
```
ã‚„ã¯ã‚Šã‚¨ãƒ©ãƒ¼
django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No module named 'psycopg2'



```sh
docker-compose exec poli-link-api pipenv install psycopg2-binary
docker-compose up --build
```
docker-compose up --buildã€€ãŒå¿…è¦ã ã£ãŸï¼Ÿ
http://localhost:8000/
è¦‹ãˆãŸ

ã“ã‚Œã‚’åˆæœŸã‚½ãƒ¼ã‚¹ã¨ã™ã‚‹

```sh
git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin git@github.com:JQinglong/poli-link.git
git push -u origin main
```


```sh
```


```sh
```
